var app=app||{};function show_page_controls(){app.element.input.setAttribute("data-page-controls","1")}function hide_page_controls(){app.element.input.setAttribute("data-page-controls","0")}function show_results(){search_results.setAttribute("data-hidden","0")}function hide_results(){search_results.setAttribute("data-hidden","1")}function set_error_html(e){error_message.innerHTML=e}function show_error(){error_message.setAttribute("data-hidden","0")}function hide_error(){error_message.setAttribute("data-hidden","1")}function set_error(e,t){error_message.innerHTML="<h1>"+e+"</h1><p>"+t+"</p>"}function set_results_html(e){search_results.innerHTML=e}function setPageNumber(e){app.input.page=e,page_number.innerText=e}app.config={},app.config.ajax_url="/ajax/proxy.php",app.input={},app.input.page=1,app.element={},app.element.input=search_container.querySelector(".input"),page_number.innerText=app.input.page,app.make_clean_table_data=function(e){var t=e.querySelectorAll("tr"),r=document.createElement("table"),n=document.createElement("thead"),a=document.createElement("tbody");r.setAttribute("id","table_data"),n.innerHTML=`
<tr>
    <td class="w-50">Name</td>
    <td>Uploaded</td>
    <td>Size</td>
    <td>Seeders/Leechers</td>
    <td>Author</td>
    <td>Actions</td>
</tr>
`;for(let i=0,o=t.length;i<o;i++){var d=t[i];if("header"!=d.className&&"text-align:center;"!=d.querySelector("td").getAttribute("style")){var s=d.querySelectorAll("td"),l=s[1].innerText,u=s[2].innerText,p=s[3].querySelector('a[href^="magnet"]').getAttribute("href"),c=s[4].innerText,h=s[5].innerText,f=s[6].innerText,g=s[7].innerText,m=document.createElement("tr"),b="";b+="<td>"+l+"</td>",b+="<td>"+u+"</td>",b+="<td>"+c+"</td>",b+="<td>"+h+"/"+f+"</td>",b+="<td>"+g+"</td>",b+='<td><a href="'+p+'" title="Open Magnet Link"><button class="action magnet"></button></a></td>',m.innerHTML=b,a.appendChild(m)}}r.appendChild(n),r.appendChild(a),set_results_html(r.outerHTML)},app.search=function(e=null){if(null!=e){var t=new XMLHttpRequest;t.onreadystatechange=function(){if(4==t.readyState&&200==t.status){var e=document.createElement("div"),r=t.responseText.toString();if(!0==("<!--proxyerror-->"==r.substring(0,17))){set_error_html(r),show_error(),set_results_html(""),hide_results(),hide_page_controls();return}set_error_html(""),hide_error(),show_results(),e.innerHTML=r;var n,a=e.querySelector("#searchResult");!0==(null!=a.querySelector("tbody"))?(show_page_controls(),set_error_html(""),hide_error(),app.make_clean_table_data(a),show_results()):(set_error("Error","Table returned no results."),show_error(),set_results_html(""),hide_results())}};var r=app.config.ajax_url+"?search="+e+"&page="+app.input.page;t.open("GET",r),t.send()}},search_button.addEventListener("click",function(e){var t=search_input.value.trim().toString();0!=t.length&&app.search(t)}),search_input.addEventListener("keyup",function(e){if(13==e.keyCode){var t=search_input.value.trim().toString();0!=t.length&&app.search(t)}}),page_decrease.addEventListener("click",function(e){var t=parseInt(page_number.innerText);1!=t&&setPageNumber(t-1)}),page_increase.addEventListener("click",function(e){setPageNumber(parseInt(page_number.innerText)+1)}),page_number.addEventListener("keydown",function(e){13==e.keyCode&&page_number.dispatchEvent(new Event("focusout")),e.keyCode>47&&59>e.keyCode||8==e.keyCode||3==e.location&&e.keyCode>95&&106>e.keyCode||e.preventDefault()}),page_number.addEventListener("dblclick",function(e){page_number.setAttribute("contenteditable","true"),page_number.focus()}),page_number.addEventListener("focusout",function(e){page_number.removeAttribute("contenteditable"),page_number.blur();var t=parseInt(page_number.innerText);isNaN(t)&&(t=1),t>999&&(t=999),0>=t&&(t=1),setPageNumber(t)});